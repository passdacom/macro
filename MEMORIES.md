# MEMORIES.md - 개발 교훈 기록

> 이 파일은 개발 과정에서 배운 교훈을 기록하여 동일한 실수를 반복하지 않기 위한 목적으로 유지됩니다.

---

## 2025-11-19: 이벤트 그룹화 로직 재설계

### 교훈
- **ALWAYS**: 복잡한 로직을 구현할 때는 상태 머신(State Machine) 패턴을 사용하라.
- **ALWAYS**: 로그 파일을 분석하기 전에 기존 로그를 삭제하여 새로운 로그만 확인하라.
- **NEVER**: 원시 데이터 수집 단계(Recorder)에서 고수준 로직(더블클릭 감지 등)을 처리하려 하지 마라.

### 상세
- 순차적 패턴 매칭 방식은 다양한 예외 케이스에 취약함
- 레코더는 순수하게 원시 이벤트만 기록하고, 그룹퍼가 모든 그룹화 책임을 가져야 함
- 플레이어가 `action.type`을 인지하여 고수준 명령을 직접 실행하도록 해야 트리플 클릭 버그 등을 방지할 수 있음

---

## 2026-02-01: 코드 리팩토링 시작

### 교훈
- **ALWAYS**: 리팩토링 전에 기존 기능이 정상 동작하는지 확인하라.
- **ALWAYS**: 한 번에 하나의 변경만 수행하고, 각 변경 후 테스트하라.
- **NEVER**: 여러 모듈을 동시에 수정하지 마라. 의존성 문제가 발생할 수 있다.

---

## 규칙 목록 (빠른 참조)

1. ALWAYS: 로그는 새로 시작하고 분석하라
2. ALWAYS: 상태 머신 패턴을 복잡한 로직에 사용하라
3. ALWAYS: 관심사를 분리하라 (Recorder, Grouper, Player)
4. ALWAYS: 한 번에 하나의 변경, 각 변경 후 테스트
5. NEVER: 원시 데이터 수집 단계에서 고수준 로직 처리 금지
6. NEVER: 여러 모듈 동시 수정 금지
